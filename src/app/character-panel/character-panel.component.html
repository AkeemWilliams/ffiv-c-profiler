<section class=dashboard-search-area>
  <h1>FFXIV Character Profiler</h1>
  <div class="search-inp">
    <p>A helpful tool to track collectibles in Final Fantasy XIV. Track Achievements, Mounts and Minion
      Collections. Be it from seasoned players to sprouts, this tool is made for all collectors. </p>
    <mat-form-field class="char-search" appearance="fill">
      <mat-label>Character Url or ID</mat-label>
      <input matInput type="text" placeholder="https://na.finalfantasyxiv.com/lodestone/character/1234567"
        [(ngModel)]="characterUrl">
    </mat-form-field>
    <!-- <p class="err-msg" *ngIf="errorShow">{{errMsg}}</p> -->
    <div *ngIf="errMsg$ | async as errorMessage">
      {{ errorMessage }}
    </div>
    <button mat-raised-button (click)="searchCharacter()" [ngClass]="characterUrl  ? 'btn-active' : '' "
      [disabled]="!characterUrl">Profile Character</button>

  </div>
</section>

<div *ngIf="showSpinner" class="spin-overlay">
  <mat-spinner></mat-spinner>
</div>
<section class="char-section" *ngIf="userData">
  <div *ngIf="userData" class="character-sheet">
    <section class="char-name">
      <div>{{userData.Character.Name}}</div>
      <div>Server: {{userData.Character.DC}} : {{userData.Character.server}}</div>
    </section>
    <section class="character-proper">
      <div class="char-portrait">
        <img src="{{userData.Character.Portrait}}" alt="Character Portrait" />
      </div>
    </section>
    <section class="user-progression">
      <h2>Collections</h2>
      <div class="achievements-proper">
        <h3>Achievements - {{userData.achievementCompletion}}%</h3>
        <app-user-progress-bar [value]="userData.achievementCompletion" [bufferValue]="200"></app-user-progress-bar>
        <span>{{userData.achieveCount}} of {{userData.achievementDet.count}} Completed </span>
      </div>
      <div class="mounts-proper">
        <h3>Mounts - {{userData.mountCompletion}}%</h3>
        <app-user-progress-bar [value]="userData.mountCompletion" [bufferValue]="200"></app-user-progress-bar>
        <span>{{userData.mountCount}} of {{userData.mountDet.count}} Collected </span>
      </div>
      <div class="minions-proper">
        <h3>Minions - {{userData.minionCompletion}}%</h3>
        <app-user-progress-bar [value]="userData.minionCompletion" [bufferValue]="200"></app-user-progress-bar>
        <span>{{userData.minionCount}} of {{userData.minionDet.count}} Collected </span>
      </div>
    </section>
  
     <!-- <div *ngIf="testEffectData$">{{testEffectData$ | json}}</div> -->

  </div>
</section>

